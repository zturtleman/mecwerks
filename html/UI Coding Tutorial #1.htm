

<HTML>
<HEAD>
<TITLE>Q3 Center - The Gamers' Choice!</TITLE>
<LINK rel="stylesheet" href="/pagestyle.css">
<script language="JavaScript" type="text/javascript">
<!--
function go(where) {
  if(where != "void" && where!="") location.href = where;
}
wallPaperWindowsLength = 0;

function reply(tid,pid,cid,lang) {

  url = "/reply.phtml?tid=" + tid + "&pid=" + pid + "&id=" + cid + "&language=" + lang + '&ref=%2Ffeatures%2Ffeatures.phtml%3Fid%3D16031%26language%3Den';
  ipwindow = open("","prewindow","scrollbars=yes,toolbar=no,height=400,width=400");
  ipwindow.location.href = url;
        
}

function rateit(id,vote) {
    if(vote != "") {
		document.rate.content_id.value = id;
		document.rate.vote.value = vote;
		document.rate.submit();
	}
}

function screenshot(cid,pid) {

  url = "/screenshot.phtml?cid=" + cid + "&pid=" + pid;
  ipwindow = open("","prewindow","scrollbars=yes,toolbar=no,height=630,width=710");
  ipwindow.location.href = url;
        
}

function relatedmedia(url) {

  ipwindow = open("","prewindow","scrollbars=yes,toolbar=no,height=300,width=300");
  ipwindow.location.href = url;
        
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function getWall(id,name) {
  url = "/getwall.phtml?thisid=" + id + "&thisname=" + name;

	ipwindow = open("","prewindow_"+wallPaperWindowsLength,"fullscreen=no,resizable=yes,scrollbars=yes,toolbar=yes,height=600,width=800");        
        ipwindow.location.href = url;
	wallPaperWindowsLength++;

}

function getFile(id,name) {
  url = "/common/getfile.phtml?thisid=" + id + "&thisname=" + name;
  ipwindow = open("","prewindow","scrollbars=no,toolbar=no,height=200,width=495");
  ipwindow.location.href = url;
}
function localDate(dateStr) {
  now = new Date();
  var ar1 = now.toString().split(" ");
  var addH = -100;
  var addM = -100;
  var gmt = new Array(new Array());
  gmt["PST"] = -8;
  gmt["MST"] = -7;
  gmt["CST"] = -6;
  gmt["EST"] = -5;
  gmt["UTC"] = 0;
  if(ar1[4].indexOf("+") != -1) {
    var gm = ar1[4].split("+");
    gm[2] = 0-gm[1].substr(0,2);
    addH = Number(gm[2]);
    gm[2] = 0-gm[1].substr(2,2);
    addM = Number(gm[2]);
  }
  if(ar1[4].indexOf("-") != -1) {
    var gm = ar1[4].split("-");
    gm[2] = gm[1].substr(0,2);
    addH = Number(gm[2]);
    gm[2] = gm[1].substr(2,2);
    addM = Number(gm[2]);
  }
  if(addH == -100) {
    addH = gmt[ar1[4]];
    addM = 0;
  }
  there = new Date(dateStr);
  nowP = Date.parse(there);
  if(addH > 0) nowP -= 3600000;
  nowP += Number(addH)*3600000;
  nowP += Number(addM)*60000;
  realD = new Date(nowP);
  real = realD.toLocaleString();
  //  document.write(real[0] + " " + real[1] + " " + real[2] + " " +real[3]);
  document.write(real);
}
//-->
</script>

 
</HEAD>
<BODY bgcolor="#000000" marginwidth="0" marginheight="0" topmargin="0" leftmargin="0" text="#FFFFFF" link="#303A41" vlink="#303A41" alink="#303A41">

<!-- Webserver: w17 --><!-- loginUrl: http://www.q3center.com/common/loginNew.phtml?ref=www.q3center.com&page=/features/features.phtml?id=16031&language=en !--><!-- loginUrl: http://www.q3center.com/common/members.phtml?ref=www.q3center.com&page=/features/features.phtml?id=16031&language=en !--><script language="JavaScript">
<!--
function MM_openBrWindow(theURL,winName,features) { //v2.0
  window.open(theURL,winName,features);  
}
function login() {

  window.open('http://www.q3center.com/common/loginNew.phtml?ref=www.q3center.com&page=/features/features.phtml?id=16031&language=en', 'Login', 'width=250,height=250,scrollbars=yes'); 
}
function member() {
  window.open('http://www.q3center.com/common/members.phtml?ref=www.q3center.com&page=/features/features.phtml?id=16031&language=en', 'Member', 'width=500,height=600,scrollbars=yes'); 
}
//-->
</script><!-- Place the following code where you want an ad to appear -->



<table width="100%" border="0" cellspacing="0" cellpadding="0" background="/common/images/topplate/resize.gif">
  <tr> 
    <td> 
      <table width="488" border="0" cellspacing="0" cellpadding="0" background="/common/images/topplate/resize.gif">
				<tr> 
          <td><img src="/common/images/topplate/metalcorner.gif" width="5" height="20"></td>
				          <td><a href="javascript:login();"><img src="/common/images/topplate/memberlogin.gif" width="80" height="20" border="0"></a></td>					
			            <td><img src="/common/images/topplate/arrow.gif" width="10" height="20"></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/pc.gif" width="23" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/action.gif" width="47" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/roleplay.gif" width="62" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/simulation.gif" width="70" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/console.gif" width="56" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/strategy.gif" width="64" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/racing.gif" width="47" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
<td>
</td>
</tr>
      </table>
    </td>
    <td background="/common/images/topplate/resize.gif" width="100%"><img src="/common/images/topplate/resize.gif" width="100%" height="20"></td>
    <td>
      <table width="88" border="0" cellspacing="0" cellpadding="0" background="/common/images/topplate/resize.gif">
        <tr>
          <td><img src="/common/images/topplate/metalcolumn.gif" width="3" height="20"></td>
          <td><a href="javascript:;" onClick="MM_openBrWindow('/common/sitemap.html','navigation','width=540,height=450')"><img src="/common/images/topplate/mgonetwork.gif" width="82" height="20" border="0"></a></td>
          <td><img src="/common/images/topplate/metalcorner.gif" width="5" height="20"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#000000">
  <tr> 
    <td></td>
  </tr>
</table>
 
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
 <TR> 
    <TD><img src="/images/top/topleft.jpg" width="152" height="136" usemap="#Map" border="0"><map name="Map"><area shape="rect" coords="10,51,127,84" href="http://www.mgon.com"></map></TD>
    <TD><img src="/images/top/logo.jpg" width="379" height="136"></TD>
    <TD background="/images/top/resize.jpg" width="100%"><img src="/images/misc/1pix.gif" width="1" height="1"></TD>
    <TD><IMG src="/images/top/topright.jpg" width="209" height="136"></TD>
 </TR>
</TABLE>
<!--bannerarea-->
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
  <TR bgcolor="#000000">
    <TD background="/images/bannersection/mgochannel.gif" bgcolor="#000000"><object
classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=4,0,2,0" width="120" height="60" hspace="12" id="mgonFlash">
				<param name=movie value="http://se.fs.mgon.com/flashmovies/mgochannel1.swf">
              <param name=quality value=high>
              <param name="menu" value="false"><param name="BGCOLOR" value="#000000">
              <embed src="http://se.fs.mgon.com/flashmovies/mgochannel1.swf" quality=high pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"
type="application/x-shockwave-flash" menu="false" width="120" height="60"
hspace="12" name="mgonFlash" bgcolor="#000000"></embed></object></TD><TD
width="100%" align="center" bgcolor="#000000"><!--Ad 468x60-->      <span class="smalltext"><!-- 468x60 --><iframe src="http://as1.falkag.de/server/rich.asp?cmd=ifr&dat=44903&xl=468&yl=60&opt=0" width=468 height=60 noresize scrolling="no" hspace="0" vspace="0" frameborder="0" marginheight="0" marginwidth="0"><nolayer><a href="http://as1.falkag.de/server/poor.asp?cmd=lnk&dat=44903&opt=0" target="_blank"><img src="http://as1.falkag.de/server/poor.asp?cmd=ban&dat=44903&opt=0" width=468 height=60 alt="Click Here." border="0"></a></nolayer><ilayer id="ad44903" visibility="hide" width=468 height=60></ilayer></iframe></span><!-- END --><!--/Ad 468x60--></TD><TD><img
src="/images/bannersection/topright.gif"
width="143" height="60"></TD></TR> </TABLE>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
  <TR>
    <TD><IMG src="/images/bannersection/left.gif" width="500" height="18"></TD>
    <TD background="/images/bannersection/resize.gif" width="100%"><img src="/images/misc/1pix.gif" width="1"
height="1"></TD>
    <TD><IMG src="/images/bannersection/right.gif" width="170" height="18"></TD>
  </TR>
</TABLE>
<SCRIPT LANGUAGE="JavaScript">
document.mgonFlash.play();
</SCRIPT>

<table width="100%" cellspacing="1" cellpadding="5" border="0">
<tr>
  <td width="100%" class="Headline" bgcolor="#25292E">&nbsp;
  </td>
  <td bgcolor="#25292E" class="Headline"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"><br>&nbsp;Navigation</td>
</tr>
</table>

<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td width="100%" bgcolor="#444E55"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"></td></tr>
<tr><td width="100%" bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="150" height="2" border="0"></td></tr>
<tr><td width="100%" bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"></td></tr>
</table>


<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
  <td width="100%">
<!-- Main Content -->

  <table width="100%" cellspacing="0" cellpadding="0" border="0">
  <tr>
    <td width="1%" valign="top" bgcolor="#303A41" align="center">
    <table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#000000"><tr><td><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td></tr></table>
    <p>        </td>
    <td bgcolor="#000000" class="Headline"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
    <td bgcolor="#444E55" class="Headline"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
    <td width="99%" valign="top">

<!-- MAIN BODY -->

    <table width="100%" cellspacing="1" cellpadding="0" border="0">
    <tr>
      <td bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="10" height="1" border="0"></td>
      <td width="100%" class="Headline" bgcolor="#3C0000">
      <table width="100%" cellspacing="0" cellpadding="3" border="0">
      <tr>
        <td width="50%" valign="top" nowrap class="Headline">&nbsp;UI Coding Tutorial #1</td>
        <td width="50%" align="right" valign="bottom" nowrap><span class="Bolded">Feature Type:</span> Coding Tutorials &nbsp; &nbsp; <span class="Bolded">Added:</span> 23/04 &nbsp;</td>
      </tr>
      </table>
      </td>
    </tr>
    <tr>
      <td bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="10" height="1" border="0"></td>
      <td width="100%" bgcolor="#3C0000">
      <table width="100%" cellspacing="0" cellpadding="3" border="0">
      <tr>
        <td width="100%" valign="top">&nbsp; <span class="Bolded">Author:</span> IoN_PuLse&nbsp;</td>
      </tr>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="2">
      <table width="100%" cellspacing="0" cellpadding="0" border="0">
      <tr><td width="100%" bgcolor="#444E55"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"></td></tr>
      <tr><td width="100%" bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="150" height="2" border="0"></td></tr>
      <tr><td width="100%" bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"></td></tr>
      </table>
      </td>      
    </tr>
    </table>
    <table width="100%" cellspacing="0" cellpadding="15" border="0">
    <tr>
      <td width="100%">



<p><i>Learn how the main menu of Quake3 works. </i>
<p>

<TABLE width="100%" border="0" cellspacing="0">
<TR> 
  <TD> 
  <SPAN class="Headline"></SPAN>
  <P>When I first downloaded the Quake3 source, I found the folder within the source directory called UI. I figured it was just menu stuff, nothing special and moved on to the server side stuff. But when I was asked to learn how the menu code works, I sure thought of it differently. <br />
<br />
You can do a lot of stuff with the UI code, but in this tutorial I will be detailing how the UI works. <br />
<br />
<br />
Open up ui_menu.c in the UI folder. At the top you will see this:<br />
<FONT SIZE=-2 COLOR="#00FF00"><br />
#include "ui_local.h"<br />
<br />
<br />
#define ID_SINGLEPLAYER			10<br />
#define ID_MULTIPLAYER			11<br />
#define ID_SETUP				12<br />
#define ID_DEMOS				13<br />
#define ID_CINEMATICS			14<br />
#define ID_MODS				15<br />
#define ID_EXIT					16<br />
<br />
#define MAIN_BANNER_MODEL	"models/mapobjects/banner/banner5.md3"<br />
#define MAIN_MENU_VERTICAL_SPACING		34<br />
</FONT><br />
Here is all the initial definitions for the main menu buttons. You can probably figure out what’s what. Near the bottom, you will see model definitions, that is for the “Quake3” model that’s at the top of the main menu. All the text-based buttons (even the ones that pulse) are code-based, without pictures. I’ll show you how to put your own picture-buttons later on. <br />
<br />
Now for the next bit:<br />
<FONT SIZE=-2 COLOR="#C0C0C0"><br />
typedef struct {<br />
	menuframework_s	menu;<br />
<br />
	menutext_s		singleplayer;<br />
	menutext_s		multiplayer;<br />
	menutext_s		setup;<br />
	menutext_s		demos;<br />
	menutext_s		cinematics;<br />
	menutext_s		mods;<br />
	menutext_s		exit;<br />
<br />
	qhandle_t		bannerModel;<br />
} mainmenu_t;<br />
<br />
<br />
static mainmenu_t s_main; <br />
</FONT><br />
Here are additional definitions, basically what each button is. On the left you can see menutext_s’s, and a qhandle_t. These just tell Quake3 what type of button you’re using. Also, you can just comment out the bannermodel reference here and the button will not show up at all. <br />
<br />
<FONT SIZE=-2 COLOR="#6164EF"><br />
/*<br />
=================<br />
MainMenu_ExitAction<br />
=================<br />
*/</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
static void MainMenu_ExitAction( qboolean result ) {<br />
	if( !result ) {<br />
		return;<br />
	}<br />
	UI_PopMenu();<br />
	UI_CreditMenu();<br />
}<br />
</FONT><br />
This defines the ExitAction (when you press quit). UI_PopMenu tells Quake3 to kill any menus that are running, then the creditmenu is the menu where you see the credits, and that is in ui_credits.c. <br />
<FONT SIZE=-2 COLOR="#6164EF"><br />
/*<br />
=================<br />
Main_MenuEvent<br />
=================<br />
*/</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
void Main_MenuEvent (void* ptr, int event) {<br />
	if( event != QM_ACTIVATED ) {<br />
		return;<br />
	}<br />
<br />
	switch( ((menucommon_s*)ptr)->id ) {<br />
	case ID_SINGLEPLAYER:<br />
		UI_SPLevelMenu();<br />
		break;<br />
<br />
	case ID_MULTIPLAYER:<br />
		UI_ArenaServersMenu();<br />
		break;<br />
<br />
	case ID_SETUP:<br />
		UI_SetupMenu();<br />
		break;<br />
<br />
	case ID_DEMOS:<br />
		UI_DemosMenu();<br />
		break;<br />
<br />
	case ID_CINEMATICS:<br />
		UI_CinematicsMenu();<br />
		break;<br />
<br />
	case ID_MODS:<br />
		UI_ModsMenu();<br />
		break;<br />
<br />
	case ID_EXIT:<br />
		UI_ConfirmMenu( "EXIT GAME?", NULL, MainMenu_ExitAction );<br />
		break;<br />
	}<br />
}<br />
</FONT><br />
This tells Quake3 what to do if a button gets clicked on. Here different buttons will trigger other menus. <br />
<FONT SIZE=-2 COLOR="#6164EF"><br />
/*<br />
===============<br />
Main_MenuDraw<br />
===============<br />
*/</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
static void Main_MenuDraw( void ) {<br />
	refdef_t		refdef;<br />
	refEntity_t		ent;<br />
	vec3_t			origin;<br />
	vec3_t			angles;<br />
	float			adjust;<br />
	float			x, y, w, h;<br />
	vec4_t			color = {0.5, 0, 0, 1};<br />
</FONT><FONT SIZE=-2 COLOR="#6164EF"><br />
	// setup the refdef<br />
</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
	memset( &refdef, 0, sizeof( refdef ) );<br />
<br />
	refdef.rdflags = RDF_NOWORLDMODEL;<br />
<br />
	AxisClear( refdef.viewaxis );<br />
<br />
	x = 0;<br />
	y = 0;<br />
</FONT><br />
Here you can change the w and h variables (width and height) to whatever you want. (Try setting w = 640 and h = 480) =)<br />
<FONT SIZE=-2 COLOR="#C0C0C0"><br />
	w = 500;<br />
	h = 60;<br />
	UI_AdjustFrom640( &x, &y, &w, &h );<br />
	refdef.x = x;<br />
	refdef.y = y;<br />
	refdef.width = w;<br />
	refdef.height = h;<br />
<br />
	adjust = 0; </FONT><FONT SIZE=-2 COLOR="#6164EF">// JDC: Kenneth asked me to stop this 1.0 * sin( (float)uis.realtime / 1000 );</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
	refdef.fov_x = 60 + adjust;<br />
	refdef.fov_y = 19.6875 + adjust;<br />
<br />
	refdef.time = uis.realtime;<br />
<br />
	origin[0] = 300;<br />
	origin[1] = 0;<br />
	origin[2] = -32;<br />
<br />
	trap_R_ClearScene();<br />
</FONT><FONT SIZE=-2 COLOR="#6164EF"><br />
	// add the model</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
<br />
<br />
	memset( &ent, 0, sizeof(ent) );<br />
<br />
	adjust = 5.0 * sin( (float)uis.realtime / 5000 );<br />
	VectorSet( angles, 0, 180 + adjust, 0 );<br />
	AnglesToAxis( angles, ent.axis );<br />
	ent.hModel = s_main.bannerModel;<br />
	VectorCopy( origin, ent.origin );<br />
	VectorCopy( origin, ent.lightingOrigin );<br />
	ent.renderfx = RF_LIGHTING_ORIGIN | RF_NOSHADOW;<br />
	VectorCopy( ent.origin, ent.oldorigin );<br />
<br />
	trap_R_AddRefEntityToScene( &ent );<br />
<br />
	trap_R_RenderScene( &refdef );<br />
</FONT><FONT SIZE=-2 COLOR="#6164EF"><br />
	// standard menu drawing<br />
</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
	Menu_Draw( &s_main.menu );<br />
<br />
	if (uis.demoversion) {<br />
		UI_DrawProportionalString( 320, 372, "DEMO      FOR MATURE AUDIENCES      DEMO", UI_CENTER|UI_SMALLFONT, color );<br />
		UI_DrawString( 320, 400, "Quake III Arena(c) 1999-2000, Id Software, Inc.  All Rights Reserved", UI_CENTER|UI_SMALLFONT, color );<br />
	} else {<br />
		UI_DrawString( 320, 450, "Quake III Arena(c) 1999-2000, Id Software, Inc.  All Rights Reserved", UI_CENTER|UI_SMALLFONT, color );<br />
	}<br />
}<br />
</FONT><br />
Most of this just talks about how the model will be drawn, but the bottom part adds the Id Software stuff, you might want to take out if it doesn’t match your new UI. For the next part I’m only going to go over one button, because the rest are about the same. <br />
<br />
<FONT SIZE=-2 COLOR="#C0C0C0"><br />
void UI_MainMenu( void ) {<br />
	int		y;<br />
	int		style = UI_CENTER | UI_DROPSHADOW;<br />
<br />
	trap_Cvar_Set( "sv_killserver", "1" );<br />
<br />
	if( !uis.demoversion && !ui_cdkeychecked.integer ) {<br />
		char	key[17];<br />
<br />
		trap_GetCDKey( key, sizeof(key) );<br />
		if( strcmp( key, "123456789" ) == 0 ) {<br />
			UI_CDKeyMenu();<br />
			return;<br />
		}<br />
	}<br />
<br />
	memset( &s_main, 0 ,sizeof(mainmenu_t) );<br />
<br />
	MainMenu_Cache();<br />
<br />
	s_main.menu.draw = Main_MenuDraw;<br />
	s_main.menu.fullscreen = qtrue;<br />
	s_main.menu.wrapAround = qtrue;<br />
	s_main.menu.showlogo = qtrue;<br />
<br />
	y = 134;<br />
	s_main.singleplayer.generic.type		= MTYPE_PTEXT;<br />
	s_main.singleplayer.generic.flags		= QMF_CENTER_JUSTIFY|QMF_PULSEIFFOCUS;<br />
	s_main.singleplayer.generic.x			= 320;<br />
	s_main.singleplayer.generic.y			= y;<br />
	s_main.singleplayer.generic.id			= ID_SINGLEPLAYER;<br />
	s_main.singleplayer.generic.callback	= Main_MenuEvent; <br />
	s_main.singleplayer.string				= "SINGLE PLAYER";<br />
	s_main.singleplayer.color				= color_red;<br />
	s_main.singleplayer.style				= style;<br />
<br />
	y += MAIN_MENU_VERTICAL_SPACING;<br />
</FONT><br />
Ok, if you notice at the top, they define “y” and “style”. These just basically save the programmers time. The “y” is used to find the spacing for the menu buttons. Below the first button, you’ll see reference to the MAIN_MENU_VERTICAL_SPACING, that was defined before. It’s using a math formula to figure out where to stick the button on the y axis. (the x is the same for all of them) Now the style is defined, and so the programmers just have to type “style” in for the s_main.singleplayer.style (example) because the contents of “style” is the same for all the buttons. <br />
</FONT><FONT SIZE=-2 COLOR="#C0C0C0"><br />
	y += MAIN_MENU_VERTICAL_SPACING;<br />
	s_main.setup.generic.type				= MTYPE_PTEXT;<br />
	s_main.setup.generic.flags			= QMF_CENTER_JUSTIFY|QMF_PULSEIFFOCUS;<br />
	s_main.setup.generic.x					= 320;<br />
	s_main.setup.generic.y					= y;<br />
	s_main.setup.generic.id					= ID_SETUP;<br />
	s_main.setup.generic.callback			= Main_MenuEvent; <br />
	s_main.setup.string						= "SETUP";<br />
	s_main.setup.color						= color_red;<br />
	s_main.setup.style						= style;<br />
</FONT><br />
Here is the main definitions for the SETUP button. You will see the math thingy at the top, and on the second line it tells Quake3 what generic type the button is. Then the flags, and the only real important thing there is that the button will “pulse” when the mouse is over it. The next is the x coordinate, after that the y, then it tells Quake3 to find the ID_SETUP when the button is clicked. (remember that from before?) Then it tells Quake3 which menu the action will be taking place in, then what text is actually going to be displayed, (change it to configuration for fun) what color is being used, and then the style part. <br />
That’s basically how the Quake3 Main Menu works, and later I will do more tutorials about how to actually change things, etc. <br />
<br />
-<a href="mailto:ion_pulse@q3center.com">IoN_PuLse</a><br />
  </TD>
</TR>
</TABLE>


<p><TABLE width="100%" border="0" cellspacing="0">
<TR>
  <TD align="left">
  </TD>
  <TD align="right">
  <a href="/features/features.phtml?id=16031&language=en&action=comments" class="Headline">Comments&nbsp;&raquo;</a>  </TD>
</TR>
</TABLE>


      </td>
    </tr>
    </table>
  
    </td>
  </tr>
  </table>

<!-- End of Main Content -->
  </td>
  <td bgcolor="#444E55"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
  <td bgcolor="#000000"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
  <td bgcolor="#303A41" valign="top"><img src="/images/misc/1pix.gif" width="158" height="1" border="0"><br>

<table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#000000"><tr><td>

<img src="/images/misc/1pix.gif" width="1" height="1" border="0"><br>



<table width="100%" cellspacing="0" cellpadding="0" border="0" bgcolor="#000000"><tr>
<td bgcolor="#303A41" nowrap><img src="/images/misc/1pix.gif" width="10" height="25" border="0"></td>
<td bgcolor="#000000"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
<td width="100%" bgcolor="#303A41" class="Bolded">&nbsp; Page 1</td>
</tr></table><img src="/images/misc/1pix.gif" width="1" height="1" border="0"><br>



        

<table width="100%" cellspacing="0" cellpadding="0" border="0" bgcolor="#000000"><tr>
<td bgcolor="#303A41" nowrap><img src="/images/misc/1pix.gif" width="10" height="25" border="0"></td>
<td bgcolor="#000000"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
<td width="100%" bgcolor="#3C0000" class="Bolded">&nbsp; <a href="/features/features.phtml?id=16031&action=comments">Comments</a> ( 0 )</td>
</tr></table><img src="/images/misc/1pix.gif" width="1" height="1" border="0"><br>


</td></tr></table>

<p><table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#000000"><tr><td>

<img src="/images/misc/1pix.gif" width="1" height="1" border="0"><br>
<table width="100%" cellspacing="0" cellpadding="0" border="0" bgcolor="#000000"><tr>
<td bgcolor="#303A41" nowrap><img src="/images/misc/1pix.gif" width="10" height="25" border="0"></td>
<td bgcolor="#000000"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
<td width="100%" bgcolor="#3C0000" class="Bolded">&nbsp; <a href="/features/">Features Index</a></td>
</tr></table><img src="/images/misc/1pix.gif" width="1" height="1" border="0"><br>

</td></tr><tr><td>

<table width="100%" cellspacing="0" cellpadding="0" border="0" bgcolor="#000000"><tr>
<td bgcolor="#303A41" nowrap><img src="/images/misc/1pix.gif" width="10" height="25" border="0"></td>
<td bgcolor="#000000"><img src="/images/misc/1pix.gif" width="1" height="1" border="0"></td>
<td width="100%" bgcolor="#3C0000" class="Bolded">&nbsp; <a href="/">Home</a></td>
</tr></table><img src="/images/misc/1pix.gif" width="1" height="1" border="0"><br>

</td></tr></table>

  </td>
</tr>
</table>


<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td width="100%" bgcolor="#444E55"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"></td></tr>
<tr><td width="100%" bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="150" height="2" border="0"></td></tr>
<tr><td width="100%" bgcolor="#303A41"><img src="/images/misc/1pix.gif" width="150" height="1" border="0"></td></tr>
</table>

<table width="100%" cellspacing="0" cellpadding="10" border="0">
<tr>
  <td width="100%" align="center" valign="top" class="Bolded">Copyright © 2001 MGON International AB - <a href="#">Privacy statement</a></td>
<form name="sortit" method="post" action="/features/features.phtml">
<input type="hidden" name="sortby" value="">
<input type="hidden" name="rel_subtype" value="">
<input type="hidden" name="rel_type" value="">
<input type="hidden" name="rel_product" value="1">
<input type="hidden" name="opt1" value="">
<input type="hidden" name="opt2" value="">
<input type="hidden" name="opt3" value="">
<input type="hidden" name="opt4" value="">
<input type="hidden" name="opt5" value="">
</form>
</tr>
</table>

</body>
</html>
