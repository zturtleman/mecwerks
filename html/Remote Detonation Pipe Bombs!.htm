<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0055)http://quakestyle.telefragged.com/quake3/tutorial15.htm -->
<HTML><HEAD><TITLE>Quake Style - Quake 3 Tutorials - Weapon Mods - Remote Detonation Pipe Bombs!</TITLE>
<META content="text/html; charset=windows-1252" http-equiv=Content-Type>
<STYLE type=text/css>BODY {
	FONT-FAMILY: verdana
}
TABLE {
	FONT-FAMILY: verdana
}
TR {
	FONT-FAMILY: verdana
}
TD {
	FONT-FAMILY: verdana
}
INPUT {
	FONT-FAMILY: verdana; FONT-SIZE: 10px
}
TEXTAREA {
	FONT-FAMILY: verdana; FONT-SIZE: 10px
}
SELECT {
	FONT-FAMILY: verdana; FONT-SIZE: 10px
}
OPTION {
	FONT-FAMILY: verdana; FONT-SIZE: 10px
}
PRE {
	FONT-FAMILY: verdana; FONT-WEIGHT: bold
}
A {
	COLOR: #00ff00
}
A:hover {
	COLOR: white; TEXT-DECORATION: none
}
</STYLE>

<META content="MSHTML 5.00.2314.1000" name=GENERATOR></HEAD>
<BODY bgColor=black text=#ffff80><FONT size=1>
<DIV align=right>
<TABLE border=0 cellSpacing=0 cellborder="0">
  <TBODY>
  <TR>
    <TD align=middle><FONT size=1><B><FONT color=white>Quake Style - Quake 3 
      Tutorials</FONT><BR><FONT color=#bbcc77>Weapon Mods </FONT><FONT 
      color=#ff8000>- Remote Detonation Pipe Bombs!</FONT><BR>Turns the grenade 
      launcher into a pipe bomb launcher! 
</B></FONT></TD></TR></TBODY></TABLE></DIV><BR><!-- START TUTORIAL -->Pipe 
bombs! <BR><BR>This tutorial modifies the original grenade launcher so the 
grenades explode on command. <BR>First, open up g_missile.c and goto about line 
296 to the fire_grenade function and modify <BR><PRE><FONT size=1> 
bolt-&gt;nextthink = level.time + 2500;
</FONT></PRE><BR>so it looks like this: <BR><PRE><FONT size=1> <FONT color=#00ffff> 
bolt-&gt;nextthink = level.time + 60000;
</FONT> 
</FONT></PRE><BR>This will change the amount of time each grenade waits before 
exploding. <BR><BR>Next goto g_cmds.c and at the very top right after #include 
"g_local.h" add the following: <BR><PRE><FONT size=1><FONT color=#00ffff>  
void G_ExplodeMissile( gentity_t *ent );
</FONT> 
</FONT></PRE><BR>This declares the G_ExplodeMissile function in g_missile.c so 
we can use it here. <BR><BR><BR>At around line 1027 before ClientCommand we are 
going to add the command that will detonate the grenades. Add this: <BR><PRE><FONT size=1> <FONT color=#00ffff> 
void Cmd_Detonate_f( gentity_t *ent)
{
	gentity_t *grenades = NULL;

	while ((grenades = G_Find (grenades, FOFS(classname), "grenade")) != NULL) //search for grenade entities
	{
		if(grenades-&gt;r.ownerNum == ent-&gt;s.clientNum)  //make sure its our grenade
		{
			grenades-&gt;think = G_ExplodeMissile;
			grenades-&gt;nextthink = level.time + 5;
		}
	}

}
</FONT> 
</FONT></PRE><BR>This will search for grenades in the level and makes sure it 
belongs to the player who fired it, then finally detonates it. After (at around 
line 1112): <BR><PRE><FONT size=1> 	
	else if (Q_stricmp (cmd, "setviewpos") == 0)
		Cmd_SetViewpos_f( ent );
</FONT></PRE><BR>add this: <BR><PRE><FONT size=1><FONT color=#00ffff>  
	else if (Q_stricmp (cmd, "detonate") == 0)
		Cmd_Detonate_f(ent);
</FONT>
</FONT></PRE><BR>This adds a console command that will call the Cmd_Detonate_f 
function we made when typed in the console. Compile and run. Make sure you type 
<FONT color=#00ffff><B>/detonate</FONT></B> in the console, you now have a 
grenade launcher that fires pipe bombs. <BR><!--- END TUTORIAL ---><BR><BR><FONT 
color=#ff8000><B>-- Credits:</B></FONT> <BR>&nbsp;&nbsp; Tutorial by <A 
href="mailto:gerbil@telefragged.com"><B>Gerbil!</B></A> <BR>&nbsp;&nbsp; Return 
to <A href="http://quakestyle.telefragged.com/tuts.shtml"><B>QS 
Tutorials</B></A> <BR><BR><FONT color=#ff8000><B>-- Important:</B></FONT> 
<BR>&nbsp;&nbsp; If you do use something from QuakeStyle in your mod, please 
give us credit. <BR>&nbsp;&nbsp; Our code is copyrighted, but we give permission 
to everyone to use it in any way they see fit, as long as we are recognized. 
</FONT></BODY></HTML>
